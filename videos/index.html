import os
import json

def crear_archivo_html():
    # Obtener todos los archivos .mp4 en la carpeta
    videos = []
    for i, archivo in enumerate(os.listdir('.'), 1):
        if archivo.endswith('.mp4'):
            nombre_base = os.path.splitext(archivo)[0]
            videos.append({
                'name': f"Video {i}",
                'code': f"TIK{i:03d}",
                'file': archivo
            })
    
    # Crear el HTML
    html_template = f"""
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Mis Videos de TikTok</title>
        <style>
            body {{
                font-family: Arial, sans-serif;
                max-width: 1200px;
                margin: 0 auto;
                padding: 20px;
                background-color: #f5f5f5;
            }}
            
            .search-container {{
                margin-bottom: 20px;
            }}
            
            #searchInput {{
                width: 100%;
                padding: 12px;
                font-size: 16px;
                border: 2px solid #ddd;
                border-radius: 25px;
                outline: none;
            }}
            
            #searchInput:focus {{
                border-color: #ff0050;
            }}
            
            .video-grid {{
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 20px;
            }}
            
            .video-card {{
                background: white;
                border-radius: 10px;
                padding: 15px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                transition: transform 0.3s ease;
            }}
            
            .video-card:hover {{
                transform: translateY(-5px);
            }}
            
            video {{
                width: 100%;
                border-radius: 8px;
                margin-bottom: 10px;
            }}
            
            .video-info {{
                padding: 10px 0;
            }}
            
            .video-name {{
                font-weight: bold;
                color: #333;
                margin-bottom: 5px;
            }}
            
            .video-code {{
                color: #666;
                font-size: 14px;
                font-family: monospace;
            }}
        </style>
    </head>
    <body>
        <h1>📱 Mis Videos de TikTok</h1>
        
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="🔍 Buscar por nombre o código...">
        </div>
        
        <div class="video-grid" id="videoGrid">
        </div>

        <script>
            const videos = {json.dumps(videos, indent=4)};
            
            const videoGrid = document.getElementById('videoGrid');
            const searchInput = document.getElementById('searchInput');

            function loadVideos(videosToLoad) {{
                videoGrid.innerHTML = '';
                
                videosToLoad.forEach(video => {{
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card';
                    
                    videoCard.innerHTML = `
                        <video controls>
                            <source src="${{video.file}}" type="video/mp4">
                            Tu navegador no soporta el elemento video.
                        </video>
                        <div class="video-info">
                            <div class="video-name">${{video.name}}</div>
                            <div class="video-code">Código: ${{video.code}}</div>
                        </div>
                    `;
                    
                    videoGrid.appendChild(videoCard);
                }});
            }}

            function searchVideos() {{
                const searchTerm = searchInput.value.toLowerCase();
                const filteredVideos = videos.filter(video => 
                    video.name.toLowerCase().includes(searchTerm) ||
                    video.code.toLowerCase().includes(searchTerm)
                );
                loadVideos(filteredVideos);
            }}

            searchInput.addEventListener('input', searchVideos);
            loadVideos(videos);
        </script>
    </body>
    </html>
    """
    
    # Guardar el archivo HTML
    with open('index.html', 'w', encoding='utf-8') as f:
        f.write(html_template)
    
    print(f"✅ Se creó el archivo index.html con {len(videos)} videos")

if __name__ == "__main__":
    crear_archivo_html()